"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "(pages-dir-browser)/./components/Chat/Chat.jsx":
/*!**********************************!*\
  !*** ./components/Chat/Chat.jsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! framer-motion */ \"(pages-dir-browser)/./node_modules/framer-motion/dist/es/index.mjs\");\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/api */ \"(pages-dir-browser)/./utils/api.js\");\n/* harmony import */ var _utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/messageUtils */ \"(pages-dir-browser)/./utils/messageUtils.js\");\n/* harmony import */ var _Chat_module_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Chat.module.css */ \"(pages-dir-browser)/./components/Chat/Chat.module.css\");\n/* harmony import */ var _Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_Chat_module_css__WEBPACK_IMPORTED_MODULE_4__);\n// components/Chat/Chat.jsx\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n// Enable or disable debug logs\nconst DEBUG = \"development\" === 'development';\n/**\n * Log function that only logs in development mode\n */ const debugLog = function() {\n    for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n        args[_key] = arguments[_key];\n    }\n    if (DEBUG) {\n        console.log(...args);\n    }\n};\nconst Chat = (param)=>{\n    let { tmId, onLogout } = param;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [answers, setAnswers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [userLevel, setUserLevel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [userScore, setUserScore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [competencyStatus, setCompetencyStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Scroll to bottom of messages\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: 'smooth'\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Chat.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"Chat.useEffect\"], [\n        messages\n    ]);\n    // Initial message when chat opens\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Chat.useEffect\": ()=>{\n            const initializeChat = {\n                \"Chat.useEffect.initializeChat\": async ()=>{\n                    setIsLoading(true);\n                    try {\n                        // Initial empty message to get the first question or welcome message\n                        const response = await (0,_utils_api__WEBPACK_IMPORTED_MODULE_2__.sendChatMessage)(tmId, '', answers);\n                        // Clear any existing messages first to avoid duplicates\n                        setMessages([]);\n                        if (response && response.competency_status === 'in progress') {\n                            // We're in the survey flow\n                            setCompetencyStatus('in progress');\n                            // Add a single message\n                            if (response.message) {\n                                addBotMessage(response.message);\n                            }\n                        } else if (response && response.competency_status === 'complete') {\n                            // User has already completed the survey\n                            setCompetencyStatus('complete');\n                            if (response.level) setUserLevel(response.level);\n                            if (response.score) setUserScore(response.score);\n                            if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                                addBotMessage((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response));\n                            }\n                        }\n                    } catch (error) {\n                        console.error('Error initializing chat:', error);\n                        addBotMessage('Sorry, there was an error connecting to the chat service. Please try again later.');\n                    } finally{\n                        setIsLoading(false);\n                    }\n                }\n            }[\"Chat.useEffect.initializeChat\"];\n            initializeChat();\n        }\n    }[\"Chat.useEffect\"], [\n        tmId,\n        answers\n    ]); // Add answers as a dependency\n    const addUserMessage = (text)=>{\n        try {\n            // Use the utility to ensure text is a string\n            const messageText = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: messageText,\n                        sender: 'user',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        } catch (error) {\n            console.error('Error adding user message:', error);\n        }\n    };\n    const addBotMessage = (text)=>{\n        try {\n            // Use the utility to ensure text is a string\n            const messageText = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text);\n            debugLog('Adding bot message:', messageText);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: messageText,\n                        sender: 'bot',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        } catch (error) {\n            console.error('Error adding bot message:', error);\n            // Add a fallback message to not break the UI\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: 'Error displaying message',\n                        sender: 'bot',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        }\n    };\n    const handleSendMessage = async (e)=>{\n        e.preventDefault();\n        if (!inputValue.trim()) return;\n        const userText = inputValue.trim();\n        setInputValue('');\n        addUserMessage(userText);\n        setIsLoading(true);\n        try {\n            // If in competency test, check if this is an answer to a question\n            let updatedAnswers = [\n                ...answers\n            ];\n            if (competencyStatus === 'in progress') {\n                // We're in the survey flow, treat input as an answer\n                updatedAnswers.push(userText);\n                setAnswers(updatedAnswers);\n            }\n            const response = await (0,_utils_api__WEBPACK_IMPORTED_MODULE_2__.sendChatMessage)(tmId, userText, updatedAnswers);\n            debugLog('API response processed:', response);\n            // Update state based on response\n            if (response && response.competency_status === 'complete' && competencyStatus === 'in progress') {\n                // User just completed the survey\n                setCompetencyStatus('complete');\n                if (response.level) setUserLevel(response.level);\n                if (response.score) setUserScore(response.score);\n                // When completing the competency test, only display the congratulations message\n                // which already contains the competency level and score\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                }\n            } else if (response && response.competency_status === 'in progress') {\n                setCompetencyStatus('in progress');\n                // Add message from the response\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                }\n            } else {\n                // Normal conversation flow, not part of competency test\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                } else if (response) {\n                    debugLog('No message found in response');\n                    addBotMessage('Response received but no message found.');\n                }\n            }\n        } catch (error) {\n            console.error('Error sending message:', error);\n            addBotMessage('Sorry, there was an error processing your message. Please try again.');\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // Handle option selection for multiple choice questions\n    const handleOptionSelect = (option)=>{\n        try {\n            // Check if option is valid\n            if (!option || typeof option !== 'string') {\n                console.error('Invalid option:', option);\n                return;\n            }\n            // Extract the option letter (A, B, C, D)\n            const optionLetter = option.split('.')[0].trim().toLowerCase();\n            setInputValue(optionLetter);\n            // Auto-submit the form when an option is selected\n            setTimeout(()=>{\n                const sendButton = document.querySelector(\".\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().sendButton)));\n                if (sendButton) {\n                    sendButton.click();\n                }\n            }, 100);\n        } catch (error) {\n            console.error('Error selecting option:', error);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {\n        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatContainer),\n        initial: {\n            opacity: 0\n        },\n        animate: {\n            opacity: 1\n        },\n        transition: {\n            duration: 0.5\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatHeader),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatHeaderLeft),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().logo),\n                                children: \"TM\"\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 221,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().headerInfo),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        children: \"TM AI Day Assistant\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 223,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    userLevel && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userLevel),\n                                        children: [\n                                            \"Level: \",\n                                            userLevel,\n                                            \" \",\n                                            userScore && \"(Score: \".concat(userScore, \")\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 225,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 222,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 220,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().logoutButton),\n                        onClick: onLogout,\n                        children: \"Logout\"\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 231,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 219,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messagesContainer),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.AnimatePresence, {\n                        children: messages.map((message)=>{\n                            // Skip rendering invalid messages\n                            if (!message || typeof message !== 'object') {\n                                return null;\n                            }\n                            let options = [];\n                            try {\n                                options = message.sender === 'bot' ? (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.parseOptions)(message.text) : [];\n                            } catch (error) {\n                                console.error('Error parsing options:', error);\n                            }\n                            const shouldShowOptions = competencyStatus === 'in progress' && options.length > 0;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {\n                                className: \"\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageWrapper), \" \").concat(message.sender === 'user' ? (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userMessageWrapper) : (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().botMessageWrapper)),\n                                initial: {\n                                    opacity: 0,\n                                    y: 20\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                exit: {\n                                    opacity: 0\n                                },\n                                transition: {\n                                    duration: 0.3\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().message), \" \").concat(message.sender === 'user' ? (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userMessage) : (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().botMessage)),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageText),\n                                                children: (()=>{\n                                                    // Ensure text is a string and handle display accordingly\n                                                    const text = message.text || '';\n                                                    if (typeof text === 'string') {\n                                                        // Check if message contains an image URL\n                                                        if (message.sender === 'bot' && (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.containsImageUrl)(text)) {\n                                                            const imageUrl = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractImageUrl)(text);\n                                                            // If no valid image URL found, render normal text\n                                                            if (!imageUrl) {\n                                                                return text.split('\\n').map((line, i)=>{\n                                                                    if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                        return null;\n                                                                    }\n                                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                        children: line\n                                                                    }, i, false, {\n                                                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                        lineNumber: 288,\n                                                                        columnNumber: 38\n                                                                    }, undefined);\n                                                                }).filter(Boolean);\n                                                            }\n                                                            // Create a display text without the image URL for cleaner presentation\n                                                            const displayText = text.replace(imageUrl, '').trim();\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                                children: [\n                                                                    displayText && displayText.split('\\n').map((line, i)=>{\n                                                                        if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                            return null;\n                                                                        }\n                                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                            children: line\n                                                                        }, i, false, {\n                                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                            lineNumber: 302,\n                                                                            columnNumber: 40\n                                                                        }, undefined);\n                                                                    }).filter(Boolean),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().imageContainer),\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                                            src: imageUrl,\n                                                                            alt: \"Response image\",\n                                                                            className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().responseImage),\n                                                                            loading: \"lazy\",\n                                                                            onError: (e)=>{\n                                                                                console.error('Image failed to load, trying alternative format:', imageUrl);\n                                                                                // Extract ID from Google Drive URL and use direct format\n                                                                                if (imageUrl.includes('drive.usercontent.google.com')) {\n                                                                                    const idMatch = imageUrl.match(/id=([\\w-]+)/);\n                                                                                    if (idMatch && idMatch[1]) {\n                                                                                        const fileId = idMatch[1];\n                                                                                        e.target.src = \"https://drive.google.com/uc?export=view&id=\".concat(fileId);\n                                                                                    } else {\n                                                                                        e.target.style.display = 'none';\n                                                                                    }\n                                                                                } else {\n                                                                                    e.target.style.display = 'none';\n                                                                                }\n                                                                            }\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                            lineNumber: 307,\n                                                                            columnNumber: 33\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                        lineNumber: 306,\n                                                                        columnNumber: 31\n                                                                    }, undefined)\n                                                                ]\n                                                            }, void 0, true);\n                                                        }\n                                                        // Regular text message (no image)\n                                                        return text.split('\\n').map((line, i)=>{\n                                                            // Skip rendering lines that start with A., B., C., or D. in the textbox\n                                                            if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                return null;\n                                                            }\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                children: line\n                                                            }, i, false, {\n                                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                lineNumber: 340,\n                                                                columnNumber: 34\n                                                            }, undefined);\n                                                        }).filter(Boolean);\n                                                    } else {\n                                                        // For non-string content (should be rare with our improved handling)\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().fallbackMessage),\n                                                            children: (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                            lineNumber: 345,\n                                                            columnNumber: 27\n                                                        }, undefined);\n                                                    }\n                                                })()\n                                            }, void 0, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 272,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageTime),\n                                                children: message.time || ''\n                                            }, void 0, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 352,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 267,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    shouldShowOptions && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().optionsContainer),\n                                        children: options.map((option, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().optionButton),\n                                                onClick: ()=>handleOptionSelect(option),\n                                                whileHover: {\n                                                    scale: 1.03\n                                                },\n                                                whileTap: {\n                                                    scale: 0.97\n                                                },\n                                                children: option\n                                            }, index, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 358,\n                                                columnNumber: 23\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 356,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, message.id || Date.now() + Math.random(), true, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 257,\n                                columnNumber: 15\n                            }, undefined);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 240,\n                        columnNumber: 9\n                    }, undefined),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().typingIndicator),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 377,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 378,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 379,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 376,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 383,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 239,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().inputContainer),\n                onSubmit: handleSendMessage,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"text\",\n                        value: inputValue,\n                        onChange: (e)=>setInputValue(e.target.value),\n                        placeholder: \"Type your message...\",\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().input),\n                        disabled: isLoading\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 387,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {\n                        type: \"submit\",\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().sendButton),\n                        disabled: !inputValue.trim() || isLoading,\n                        whileHover: {\n                            scale: 1.05\n                        },\n                        whileTap: {\n                            scale: 0.95\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            width: \"24\",\n                            height: \"24\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 403,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                            lineNumber: 402,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 395,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 386,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n        lineNumber: 213,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Chat, \"rkvSJXnNUawr5gXA4zCoNTUUdck=\");\n_c = Chat;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Chat);\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2hhdC9DaGF0LmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsMkJBQTJCOzs7QUFDeUI7QUFDSTtBQUNOO0FBUWhCO0FBQ0s7QUFFdkMsK0JBQStCO0FBQy9CLE1BQU1hLFFBQVFDLGtCQUF5QjtBQUV2Qzs7Q0FFQyxHQUNELE1BQU1DLFdBQVc7cUNBQUlDO1FBQUFBOztJQUNuQixJQUFJSCxPQUFPO1FBQ1RJLFFBQVFDLEdBQUcsSUFBSUY7SUFDakI7QUFDRjtBQUVBLE1BQU1HLE9BQU87UUFBQyxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRTs7SUFDOUIsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUd2QiwrQ0FBUUEsQ0FBQyxFQUFFO0lBQzNDLE1BQU0sQ0FBQ3dCLFlBQVlDLGNBQWMsR0FBR3pCLCtDQUFRQSxDQUFDO0lBQzdDLE1BQU0sQ0FBQzBCLFdBQVdDLGFBQWEsR0FBRzNCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzRCLFNBQVNDLFdBQVcsR0FBRzdCLCtDQUFRQSxDQUFDLEVBQUU7SUFDekMsTUFBTSxDQUFDOEIsV0FBV0MsYUFBYSxHQUFHL0IsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDZ0MsV0FBV0MsYUFBYSxHQUFHakMsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDa0Msa0JBQWtCQyxvQkFBb0IsR0FBR25DLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU1vQyxpQkFBaUJsQyw2Q0FBTUEsQ0FBQztJQUU5QiwrQkFBK0I7SUFDL0IsTUFBTW1DLGlCQUFpQjtZQUNyQkQ7U0FBQUEsMEJBQUFBLGVBQWVFLE9BQU8sY0FBdEJGLDhDQUFBQSx3QkFBd0JHLGNBQWMsQ0FBQztZQUFFQyxVQUFVO1FBQVM7SUFDOUQ7SUFFQXZDLGdEQUFTQTswQkFBQztZQUNSb0M7UUFDRjt5QkFBRztRQUFDZjtLQUFTO0lBRWIsa0NBQWtDO0lBQ2xDckIsZ0RBQVNBOzBCQUFDO1lB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T25lRHJpdmUtVGVsZWtvbU1hbGF5c2lhQmVyaGFkL0RvY3VtZW50cy9BSS9BSS1EYXkvdG0tYWktd2lkZ2V0L2NvbXBvbmVudHMvQ2hhdC9DaGF0LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0NoYXQvQ2hhdC5qc3hcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1vdGlvbiwgQW5pbWF0ZVByZXNlbmNlIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5pbXBvcnQgeyBzZW5kQ2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9hcGknO1xuaW1wb3J0IHsgXG4gIGZvcm1hdE1lc3NhZ2UsIFxuICBwYXJzZU9wdGlvbnMsIFxuICBleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZSwgXG4gIGhhc1ZhbGlkTWVzc2FnZSxcbiAgY29udGFpbnNJbWFnZVVybCxcbiAgZXh0cmFjdEltYWdlVXJsXG59IGZyb20gJy4uLy4uL3V0aWxzL21lc3NhZ2VVdGlscyc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vQ2hhdC5tb2R1bGUuY3NzJztcblxuLy8gRW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbG9nc1xuY29uc3QgREVCVUcgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcblxuLyoqXG4gKiBMb2cgZnVuY3Rpb24gdGhhdCBvbmx5IGxvZ3MgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuICovXG5jb25zdCBkZWJ1Z0xvZyA9ICguLi5hcmdzKSA9PiB7XG4gIGlmIChERUJVRykge1xuICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICB9XG59O1xuXG5jb25zdCBDaGF0ID0gKHsgdG1JZCwgb25Mb2dvdXQgfSkgPT4ge1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2lucHV0VmFsdWUsIHNldElucHV0VmFsdWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYW5zd2Vycywgc2V0QW5zd2Vyc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt1c2VyTGV2ZWwsIHNldFVzZXJMZXZlbF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFt1c2VyU2NvcmUsIHNldFVzZXJTY29yZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtjb21wZXRlbmN5U3RhdHVzLCBzZXRDb21wZXRlbmN5U3RhdHVzXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIFxuICAvLyBTY3JvbGwgdG8gYm90dG9tIG9mIG1lc3NhZ2VzXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICB9O1xuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY3JvbGxUb0JvdHRvbSgpO1xuICB9LCBbbWVzc2FnZXNdKTtcbiAgXG4gIC8vIEluaXRpYWwgbWVzc2FnZSB3aGVuIGNoYXQgb3BlbnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQ2hhdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEluaXRpYWwgZW1wdHkgbWVzc2FnZSB0byBnZXQgdGhlIGZpcnN0IHF1ZXN0aW9uIG9yIHdlbGNvbWUgbWVzc2FnZVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRDaGF0TWVzc2FnZSh0bUlkLCAnJywgYW5zd2Vycyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgbWVzc2FnZXMgZmlyc3QgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgICAgICBzZXRNZXNzYWdlcyhbXSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMgPT09ICdpbiBwcm9ncmVzcycpIHtcbiAgICAgICAgICAvLyBXZSdyZSBpbiB0aGUgc3VydmV5IGZsb3dcbiAgICAgICAgICBzZXRDb21wZXRlbmN5U3RhdHVzKCdpbiBwcm9ncmVzcycpO1xuICAgICAgICAgIC8vIEFkZCBhIHNpbmdsZSBtZXNzYWdlXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGFkZEJvdE1lc3NhZ2UocmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvbXBldGVuY3lfc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgLy8gVXNlciBoYXMgYWxyZWFkeSBjb21wbGV0ZWQgdGhlIHN1cnZleVxuICAgICAgICAgIHNldENvbXBldGVuY3lTdGF0dXMoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmxldmVsKSBzZXRVc2VyTGV2ZWwocmVzcG9uc2UubGV2ZWwpO1xuICAgICAgICAgIGlmIChyZXNwb25zZS5zY29yZSkgc2V0VXNlclNjb3JlKHJlc3BvbnNlLnNjb3JlKTtcbiAgICAgICAgICBpZiAoaGFzVmFsaWRNZXNzYWdlKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgYWRkQm90TWVzc2FnZShleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZShyZXNwb25zZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIGNoYXQ6JywgZXJyb3IpO1xuICAgICAgICBhZGRCb3RNZXNzYWdlKCdTb3JyeSwgdGhlcmUgd2FzIGFuIGVycm9yIGNvbm5lY3RpbmcgdG8gdGhlIGNoYXQgc2VydmljZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBpbml0aWFsaXplQ2hhdCgpO1xuICB9LCBbdG1JZCwgYW5zd2Vyc10pOyAvLyBBZGQgYW5zd2VycyBhcyBhIGRlcGVuZGVuY3lcbiAgXG4gIGNvbnN0IGFkZFVzZXJNZXNzYWdlID0gKHRleHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXNlIHRoZSB1dGlsaXR5IHRvIGVuc3VyZSB0ZXh0IGlzIGEgc3RyaW5nXG4gICAgICBjb25zdCBtZXNzYWdlVGV4dCA9IGZvcm1hdE1lc3NhZ2UodGV4dCk7XG4gICAgICBcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHsgXG4gICAgICAgIGlkOiBEYXRlLm5vdygpLCBcbiAgICAgICAgdGV4dDogbWVzc2FnZVRleHQsIFxuICAgICAgICBzZW5kZXI6ICd1c2VyJyxcbiAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KVxuICAgICAgfV0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgdXNlciBtZXNzYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBhZGRCb3RNZXNzYWdlID0gKHRleHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXNlIHRoZSB1dGlsaXR5IHRvIGVuc3VyZSB0ZXh0IGlzIGEgc3RyaW5nXG4gICAgICBjb25zdCBtZXNzYWdlVGV4dCA9IGZvcm1hdE1lc3NhZ2UodGV4dCk7XG4gICAgICBkZWJ1Z0xvZygnQWRkaW5nIGJvdCBtZXNzYWdlOicsIG1lc3NhZ2VUZXh0KTtcbiAgICAgIFxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyBcbiAgICAgICAgaWQ6IERhdGUubm93KCksIFxuICAgICAgICB0ZXh0OiBtZXNzYWdlVGV4dCwgXG4gICAgICAgIHNlbmRlcjogJ2JvdCcsXG4gICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSlcbiAgICAgIH1dKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGJvdCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIC8vIEFkZCBhIGZhbGxiYWNrIG1lc3NhZ2UgdG8gbm90IGJyZWFrIHRoZSBVSVxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyBcbiAgICAgICAgaWQ6IERhdGUubm93KCksIFxuICAgICAgICB0ZXh0OiAnRXJyb3IgZGlzcGxheWluZyBtZXNzYWdlJywgXG4gICAgICAgIHNlbmRlcjogJ2JvdCcsXG4gICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSlcbiAgICAgIH1dKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBoYW5kbGVTZW5kTWVzc2FnZSA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIGlmICghaW5wdXRWYWx1ZS50cmltKCkpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB1c2VyVGV4dCA9IGlucHV0VmFsdWUudHJpbSgpO1xuICAgIHNldElucHV0VmFsdWUoJycpO1xuICAgIGFkZFVzZXJNZXNzYWdlKHVzZXJUZXh0KTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIGluIGNvbXBldGVuY3kgdGVzdCwgY2hlY2sgaWYgdGhpcyBpcyBhbiBhbnN3ZXIgdG8gYSBxdWVzdGlvblxuICAgICAgbGV0IHVwZGF0ZWRBbnN3ZXJzID0gWy4uLmFuc3dlcnNdO1xuICAgICAgXG4gICAgICBpZiAoY29tcGV0ZW5jeVN0YXR1cyA9PT0gJ2luIHByb2dyZXNzJykge1xuICAgICAgICAvLyBXZSdyZSBpbiB0aGUgc3VydmV5IGZsb3csIHRyZWF0IGlucHV0IGFzIGFuIGFuc3dlclxuICAgICAgICB1cGRhdGVkQW5zd2Vycy5wdXNoKHVzZXJUZXh0KTtcbiAgICAgICAgc2V0QW5zd2Vycyh1cGRhdGVkQW5zd2Vycyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZENoYXRNZXNzYWdlKHRtSWQsIHVzZXJUZXh0LCB1cGRhdGVkQW5zd2Vycyk7XG4gICAgICBcbiAgICAgIGRlYnVnTG9nKCdBUEkgcmVzcG9uc2UgcHJvY2Vzc2VkOicsIHJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHN0YXRlIGJhc2VkIG9uIHJlc3BvbnNlXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgY29tcGV0ZW5jeVN0YXR1cyA9PT0gJ2luIHByb2dyZXNzJykge1xuICAgICAgICAvLyBVc2VyIGp1c3QgY29tcGxldGVkIHRoZSBzdXJ2ZXlcbiAgICAgICAgc2V0Q29tcGV0ZW5jeVN0YXR1cygnY29tcGxldGUnKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmxldmVsKSBzZXRVc2VyTGV2ZWwocmVzcG9uc2UubGV2ZWwpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc2NvcmUpIHNldFVzZXJTY29yZShyZXNwb25zZS5zY29yZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBXaGVuIGNvbXBsZXRpbmcgdGhlIGNvbXBldGVuY3kgdGVzdCwgb25seSBkaXNwbGF5IHRoZSBjb25ncmF0dWxhdGlvbnMgbWVzc2FnZVxuICAgICAgICAvLyB3aGljaCBhbHJlYWR5IGNvbnRhaW5zIHRoZSBjb21wZXRlbmN5IGxldmVsIGFuZCBzY29yZVxuICAgICAgICBpZiAoaGFzVmFsaWRNZXNzYWdlKHJlc3BvbnNlKSkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250ZW50ID0gZXh0cmFjdE1lc3NhZ2VGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgIGFkZEJvdE1lc3NhZ2UobWVzc2FnZUNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvbXBldGVuY3lfc3RhdHVzID09PSAnaW4gcHJvZ3Jlc3MnKSB7XG4gICAgICAgIHNldENvbXBldGVuY3lTdGF0dXMoJ2luIHByb2dyZXNzJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgbWVzc2FnZSBmcm9tIHRoZSByZXNwb25zZVxuICAgICAgICBpZiAoaGFzVmFsaWRNZXNzYWdlKHJlc3BvbnNlKSkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250ZW50ID0gZXh0cmFjdE1lc3NhZ2VGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgIGFkZEJvdE1lc3NhZ2UobWVzc2FnZUNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3JtYWwgY29udmVyc2F0aW9uIGZsb3csIG5vdCBwYXJ0IG9mIGNvbXBldGVuY3kgdGVzdFxuICAgICAgICBpZiAoaGFzVmFsaWRNZXNzYWdlKHJlc3BvbnNlKSkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250ZW50ID0gZXh0cmFjdE1lc3NhZ2VGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgIGFkZEJvdE1lc3NhZ2UobWVzc2FnZUNvbnRlbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgZGVidWdMb2coJ05vIG1lc3NhZ2UgZm91bmQgaW4gcmVzcG9uc2UnKTtcbiAgICAgICAgICBhZGRCb3RNZXNzYWdlKCdSZXNwb25zZSByZWNlaXZlZCBidXQgbm8gbWVzc2FnZSBmb3VuZC4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgYWRkQm90TWVzc2FnZSgnU29ycnksIHRoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHlvdXIgbWVzc2FnZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBIYW5kbGUgb3B0aW9uIHNlbGVjdGlvbiBmb3IgbXVsdGlwbGUgY2hvaWNlIHF1ZXN0aW9uc1xuICBjb25zdCBoYW5kbGVPcHRpb25TZWxlY3QgPSAob3B0aW9uKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBpcyB2YWxpZFxuICAgICAgaWYgKCFvcHRpb24gfHwgdHlwZW9mIG9wdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBvcHRpb246Jywgb3B0aW9uKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFeHRyYWN0IHRoZSBvcHRpb24gbGV0dGVyIChBLCBCLCBDLCBEKVxuICAgICAgY29uc3Qgb3B0aW9uTGV0dGVyID0gb3B0aW9uLnNwbGl0KCcuJylbMF0udHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBzZXRJbnB1dFZhbHVlKG9wdGlvbkxldHRlcik7XG4gICAgICBcbiAgICAgIC8vIEF1dG8tc3VibWl0IHRoZSBmb3JtIHdoZW4gYW4gb3B0aW9uIGlzIHNlbGVjdGVkXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3N0eWxlcy5zZW5kQnV0dG9ufWApO1xuICAgICAgICBpZiAoc2VuZEJ1dHRvbikge1xuICAgICAgICAgIHNlbmRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VsZWN0aW5nIG9wdGlvbjonLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICBcbiAgcmV0dXJuIChcbiAgICA8bW90aW9uLmRpdiBcbiAgICAgIGNsYXNzTmFtZT17c3R5bGVzLmNoYXRDb250YWluZXJ9XG4gICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fVxuICAgICAgdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC41IH19XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jaGF0SGVhZGVyfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jaGF0SGVhZGVyTGVmdH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sb2dvfT5UTTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuaGVhZGVySW5mb30+XG4gICAgICAgICAgICA8aDM+VE0gQUkgRGF5IEFzc2lzdGFudDwvaDM+XG4gICAgICAgICAgICB7dXNlckxldmVsICYmIChcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMudXNlckxldmVsfT5cbiAgICAgICAgICAgICAgICBMZXZlbDoge3VzZXJMZXZlbH0ge3VzZXJTY29yZSAmJiBgKFNjb3JlOiAke3VzZXJTY29yZX0pYH1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMubG9nb3V0QnV0dG9ufSBcbiAgICAgICAgICBvbkNsaWNrPXtvbkxvZ291dH1cbiAgICAgICAgPlxuICAgICAgICAgIExvZ291dFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm1lc3NhZ2VzQ29udGFpbmVyfT5cbiAgICAgICAgPEFuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAvLyBTa2lwIHJlbmRlcmluZyBpbnZhbGlkIG1lc3NhZ2VzXG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UgfHwgdHlwZW9mIG1lc3NhZ2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgb3B0aW9ucyA9IG1lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyA/IHBhcnNlT3B0aW9ucyhtZXNzYWdlLnRleHQpIDogW107XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIG9wdGlvbnM6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzaG91bGRTaG93T3B0aW9ucyA9IGNvbXBldGVuY3lTdGF0dXMgPT09ICdpbiBwcm9ncmVzcycgJiYgb3B0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgIGtleT17bWVzc2FnZS5pZCB8fCBEYXRlLm5vdygpICsgTWF0aC5yYW5kb20oKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3N0eWxlcy5tZXNzYWdlV3JhcHBlcn0gJHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgPyBzdHlsZXMudXNlck1lc3NhZ2VXcmFwcGVyIDogc3R5bGVzLmJvdE1lc3NhZ2VXcmFwcGVyXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiAyMCB9fVxuICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeTogMCB9fVxuICAgICAgICAgICAgICAgIGV4aXQ9e3sgb3BhY2l0eTogMCB9fVxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuMyB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzLm1lc3NhZ2V9ICR7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgPyBzdHlsZXMudXNlck1lc3NhZ2UgOiBzdHlsZXMuYm90TWVzc2FnZVxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5tZXNzYWdlVGV4dH0+XG4gICAgICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0ZXh0IGlzIGEgc3RyaW5nIGFuZCBoYW5kbGUgZGlzcGxheSBhY2NvcmRpbmdseVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBtZXNzYWdlLnRleHQgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWVzc2FnZSBjb250YWlucyBhbiBpbWFnZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgY29udGFpbnNJbWFnZVVybCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybCA9IGV4dHJhY3RJbWFnZVVybCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vIHZhbGlkIGltYWdlIFVSTCBmb3VuZCwgcmVuZGVyIG5vcm1hbCB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgnXFxuJykubWFwKChsaW5lLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgPT09ICdib3QnICYmIGxpbmUubWF0Y2goL15bQS1EXVxcLlxccy8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxwIGtleT17aX0+e2xpbmV9PC9wPjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRpc3BsYXkgdGV4dCB3aXRob3V0IHRoZSBpbWFnZSBVUkwgZm9yIGNsZWFuZXIgcHJlc2VudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gdGV4dC5yZXBsYWNlKGltYWdlVXJsLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIERpc3BsYXkgdGV4dCBjb250ZW50ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlUZXh0ICYmIGRpc3BsYXlUZXh0LnNwbGl0KCdcXG4nKS5tYXAoKGxpbmUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiBsaW5lLm1hdGNoKC9eW0EtRF1cXC5cXHMvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8cCBrZXk9e2l9PntsaW5lfTwvcD47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBEaXNwbGF5IHRoZSBpbWFnZSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuaW1hZ2VDb250YWluZXJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17aW1hZ2VVcmx9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlJlc3BvbnNlIGltYWdlXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMucmVzcG9uc2VJbWFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPVwibGF6eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIGZhaWxlZCB0byBsb2FkLCB0cnlpbmcgYWx0ZXJuYXRpdmUgZm9ybWF0OicsIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBJRCBmcm9tIEdvb2dsZSBEcml2ZSBVUkwgYW5kIHVzZSBkaXJlY3QgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwuaW5jbHVkZXMoJ2RyaXZlLnVzZXJjb250ZW50Lmdvb2dsZS5jb20nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZE1hdGNoID0gaW1hZ2VVcmwubWF0Y2goL2lkPShbXFx3LV0rKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRNYXRjaCAmJiBpZE1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gaWRNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zcmMgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2V4cG9ydD12aWV3JmlkPSR7ZmlsZUlkfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ3VsYXIgdGV4dCBtZXNzYWdlIChubyBpbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KCdcXG4nKS5tYXAoKGxpbmUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByZW5kZXJpbmcgbGluZXMgdGhhdCBzdGFydCB3aXRoIEEuLCBCLiwgQy4sIG9yIEQuIGluIHRoZSB0ZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgbGluZS5tYXRjaCgvXltBLURdXFwuXFxzLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHAga2V5PXtpfT57bGluZX08L3A+O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLXN0cmluZyBjb250ZW50IChzaG91bGQgYmUgcmFyZSB3aXRoIG91ciBpbXByb3ZlZCBoYW5kbGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17c3R5bGVzLmZhbGxiYWNrTWVzc2FnZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdE1lc3NhZ2UodGV4dCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm1lc3NhZ2VUaW1lfT57bWVzc2FnZS50aW1lIHx8ICcnfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHtzaG91bGRTaG93T3B0aW9ucyAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm9wdGlvbnNDb250YWluZXJ9PlxuICAgICAgICAgICAgICAgICAgICB7b3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLm9wdGlvbkJ1dHRvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZU9wdGlvblNlbGVjdChvcHRpb24pfVxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGVIb3Zlcj17eyBzY2FsZTogMS4wMyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGVUYXA9e3sgc2NhbGU6IDAuOTcgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAgXG4gICAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudHlwaW5nSW5kaWNhdG9yfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZG90fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZG90fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZG90fT48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgXG4gICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8Zm9ybSBjbGFzc05hbWU9e3N0eWxlcy5pbnB1dENvbnRhaW5lcn0gb25TdWJtaXQ9e2hhbmRsZVNlbmRNZXNzYWdlfT5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHZhbHVlPXtpbnB1dFZhbHVlfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXRWYWx1ZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJUeXBlIHlvdXIgbWVzc2FnZS4uLlwiXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuaW5wdXR9XG4gICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgLz5cbiAgICAgICAgPG1vdGlvbi5idXR0b25cbiAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZW5kQnV0dG9ufVxuICAgICAgICAgIGRpc2FibGVkPXshaW5wdXRWYWx1ZS50cmltKCkgfHwgaXNMb2FkaW5nfVxuICAgICAgICAgIHdoaWxlSG92ZXI9e3sgc2NhbGU6IDEuMDUgfX1cbiAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45NSB9fVxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMi4wMSAyMUwyMyAxMiAyLjAxIDMgMiAxMGwxNSAyLTE1IDJ6XCI+PC9wYXRoPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L21vdGlvbi5idXR0b24+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9tb3Rpb24uZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdDtcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIm1vdGlvbiIsIkFuaW1hdGVQcmVzZW5jZSIsInNlbmRDaGF0TWVzc2FnZSIsImZvcm1hdE1lc3NhZ2UiLCJwYXJzZU9wdGlvbnMiLCJleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZSIsImhhc1ZhbGlkTWVzc2FnZSIsImNvbnRhaW5zSW1hZ2VVcmwiLCJleHRyYWN0SW1hZ2VVcmwiLCJzdHlsZXMiLCJERUJVRyIsInByb2Nlc3MiLCJkZWJ1Z0xvZyIsImFyZ3MiLCJjb25zb2xlIiwibG9nIiwiQ2hhdCIsInRtSWQiLCJvbkxvZ291dCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dFZhbHVlIiwic2V0SW5wdXRWYWx1ZSIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImFuc3dlcnMiLCJzZXRBbnN3ZXJzIiwidXNlckxldmVsIiwic2V0VXNlckxldmVsIiwidXNlclNjb3JlIiwic2V0VXNlclNjb3JlIiwiY29tcGV0ZW5jeVN0YXR1cyIsInNldENvbXBldGVuY3lTdGF0dXMiLCJtZXNzYWdlc0VuZFJlZiIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJpbml0aWFsaXplQ2hhdCIsInJlc3BvbnNlIiwiY29tcGV0ZW5jeV9zdGF0dXMiLCJtZXNzYWdlIiwiYWRkQm90TWVzc2FnZSIsImxldmVsIiwic2NvcmUiLCJlcnJvciIsImFkZFVzZXJNZXNzYWdlIiwidGV4dCIsIm1lc3NhZ2VUZXh0IiwicHJldiIsImlkIiwiRGF0ZSIsIm5vdyIsInNlbmRlciIsInRpbWUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwiaGFuZGxlU2VuZE1lc3NhZ2UiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0cmltIiwidXNlclRleHQiLCJ1cGRhdGVkQW5zd2VycyIsInB1c2giLCJtZXNzYWdlQ29udGVudCIsImhhbmRsZU9wdGlvblNlbGVjdCIsIm9wdGlvbiIsIm9wdGlvbkxldHRlciIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJzZXRUaW1lb3V0Iiwic2VuZEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsaWNrIiwiZGl2IiwiY2xhc3NOYW1lIiwiY2hhdENvbnRhaW5lciIsImluaXRpYWwiLCJvcGFjaXR5IiwiYW5pbWF0ZSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNoYXRIZWFkZXIiLCJjaGF0SGVhZGVyTGVmdCIsImxvZ28iLCJoZWFkZXJJbmZvIiwiaDMiLCJzcGFuIiwiYnV0dG9uIiwibG9nb3V0QnV0dG9uIiwib25DbGljayIsIm1lc3NhZ2VzQ29udGFpbmVyIiwibWFwIiwib3B0aW9ucyIsInNob3VsZFNob3dPcHRpb25zIiwibGVuZ3RoIiwibWVzc2FnZVdyYXBwZXIiLCJ1c2VyTWVzc2FnZVdyYXBwZXIiLCJib3RNZXNzYWdlV3JhcHBlciIsInkiLCJleGl0IiwidXNlck1lc3NhZ2UiLCJib3RNZXNzYWdlIiwiaW1hZ2VVcmwiLCJsaW5lIiwiaSIsIm1hdGNoIiwicCIsImZpbHRlciIsIkJvb2xlYW4iLCJkaXNwbGF5VGV4dCIsInJlcGxhY2UiLCJpbWFnZUNvbnRhaW5lciIsImltZyIsInNyYyIsImFsdCIsInJlc3BvbnNlSW1hZ2UiLCJsb2FkaW5nIiwib25FcnJvciIsImluY2x1ZGVzIiwiaWRNYXRjaCIsImZpbGVJZCIsInRhcmdldCIsInN0eWxlIiwiZGlzcGxheSIsImZhbGxiYWNrTWVzc2FnZSIsIm1lc3NhZ2VUaW1lIiwib3B0aW9uc0NvbnRhaW5lciIsImluZGV4Iiwib3B0aW9uQnV0dG9uIiwid2hpbGVIb3ZlciIsInNjYWxlIiwid2hpbGVUYXAiLCJNYXRoIiwicmFuZG9tIiwidHlwaW5nSW5kaWNhdG9yIiwiZG90IiwicmVmIiwiZm9ybSIsImlucHV0Q29udGFpbmVyIiwib25TdWJtaXQiLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJ3aWR0aCIsImhlaWdodCIsInBhdGgiLCJkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/Chat/Chat.jsx\n"));

/***/ })

});