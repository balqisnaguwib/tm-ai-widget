"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "(pages-dir-browser)/./components/Chat/Chat.jsx":
/*!**********************************!*\
  !*** ./components/Chat/Chat.jsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! framer-motion */ \"(pages-dir-browser)/./node_modules/framer-motion/dist/es/index.mjs\");\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/api */ \"(pages-dir-browser)/./utils/api.js\");\n/* harmony import */ var _utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/messageUtils */ \"(pages-dir-browser)/./utils/messageUtils.js\");\n/* harmony import */ var _Chat_module_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Chat.module.css */ \"(pages-dir-browser)/./components/Chat/Chat.module.css\");\n/* harmony import */ var _Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_Chat_module_css__WEBPACK_IMPORTED_MODULE_4__);\n// components/Chat/Chat.jsx\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n// Enable or disable debug logs\nconst DEBUG = \"development\" === 'development';\n/**\n * Log function that only logs in development mode\n */ const debugLog = function() {\n    for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n        args[_key] = arguments[_key];\n    }\n    if (DEBUG) {\n        console.log(...args);\n    }\n};\nconst Chat = (param)=>{\n    let { tmId, onLogout } = param;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [answers, setAnswers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [userLevel, setUserLevel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [userScore, setUserScore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [competencyStatus, setCompetencyStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Scroll to bottom of messages\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: 'smooth'\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Chat.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"Chat.useEffect\"], [\n        messages\n    ]);\n    // Initial message when chat opens\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Chat.useEffect\": ()=>{\n            const initializeChat = {\n                \"Chat.useEffect.initializeChat\": async ()=>{\n                    setIsLoading(true);\n                    try {\n                        // Initial empty message to get the first question or welcome message\n                        const response = await (0,_utils_api__WEBPACK_IMPORTED_MODULE_2__.sendChatMessage)(tmId, '', answers);\n                        // Clear any existing messages first to avoid duplicates\n                        setMessages([]);\n                        if (response && response.competency_status === 'in progress') {\n                            // We're in the survey flow\n                            setCompetencyStatus('in progress');\n                            // Add a single message\n                            if (response.message) {\n                                addBotMessage(response.message);\n                            }\n                        } else if (response && response.competency_status === 'complete') {\n                            // User has already completed the survey\n                            setCompetencyStatus('complete');\n                            if (response.level) setUserLevel(response.level);\n                            if (response.score) setUserScore(response.score);\n                            if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                                addBotMessage((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response));\n                            }\n                        }\n                    } catch (error) {\n                        console.error('Error initializing chat:', error);\n                        addBotMessage('Sorry, there was an error connecting to the chat service. Please try again later.');\n                    } finally{\n                        setIsLoading(false);\n                    }\n                }\n            }[\"Chat.useEffect.initializeChat\"];\n            initializeChat();\n        }\n    }[\"Chat.useEffect\"], [\n        tmId,\n        answers\n    ]); // Add answers as a dependency\n    const addUserMessage = (text)=>{\n        try {\n            // Use the utility to ensure text is a string\n            const messageText = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: messageText,\n                        sender: 'user',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        } catch (error) {\n            console.error('Error adding user message:', error);\n        }\n    };\n    const addBotMessage = (text)=>{\n        try {\n            // Use the utility to ensure text is a string\n            const messageText = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text);\n            debugLog('Adding bot message:', messageText);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: messageText,\n                        sender: 'bot',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        } catch (error) {\n            console.error('Error adding bot message:', error);\n            // Add a fallback message to not break the UI\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now(),\n                        text: 'Error displaying message',\n                        sender: 'bot',\n                        time: new Date().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                ]);\n        }\n    };\n    const handleSendMessage = async (e)=>{\n        e.preventDefault();\n        if (!inputValue.trim()) return;\n        const userText = inputValue.trim();\n        setInputValue('');\n        addUserMessage(userText);\n        setIsLoading(true);\n        try {\n            // If in competency test, check if this is an answer to a question\n            let updatedAnswers = [\n                ...answers\n            ];\n            if (competencyStatus === 'in progress') {\n                // We're in the survey flow, treat input as an answer\n                updatedAnswers.push(userText);\n                setAnswers(updatedAnswers);\n            }\n            const response = await (0,_utils_api__WEBPACK_IMPORTED_MODULE_2__.sendChatMessage)(tmId, userText, updatedAnswers);\n            debugLog('API response processed:', response);\n            // Update state based on response\n            if (response && response.competency_status === 'complete' && competencyStatus === 'in progress') {\n                // User just completed the survey\n                setCompetencyStatus('complete');\n                if (response.level) setUserLevel(response.level);\n                if (response.score) setUserScore(response.score);\n                // When completing the competency test, only display the congratulations message\n                // which already contains the competency level and score\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                }\n            } else if (response && response.competency_status === 'in progress') {\n                setCompetencyStatus('in progress');\n                // Add message from the response\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                }\n            } else {\n                // Normal conversation flow, not part of competency test\n                if ((0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.hasValidMessage)(response)) {\n                    const messageContent = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractMessageFromResponse)(response);\n                    addBotMessage(messageContent);\n                } else if (response) {\n                    debugLog('No message found in response');\n                    addBotMessage('Response received but no message found.');\n                }\n            }\n        } catch (error) {\n            console.error('Error sending message:', error);\n            addBotMessage('Sorry, there was an error processing your message. Please try again.');\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // Handle option selection for multiple choice questions\n    const handleOptionSelect = (option)=>{\n        try {\n            // Check if option is valid\n            if (!option || typeof option !== 'string') {\n                console.error('Invalid option:', option);\n                return;\n            }\n            // Extract the option letter (A, B, C, D)\n            const optionLetter = option.split('.')[0].trim().toLowerCase();\n            setInputValue(optionLetter);\n            // Auto-submit the form when an option is selected\n            setTimeout(()=>{\n                const sendButton = document.querySelector(\".\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().sendButton)));\n                if (sendButton) {\n                    sendButton.click();\n                }\n            }, 100);\n        } catch (error) {\n            console.error('Error selecting option:', error);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {\n        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatContainer),\n        initial: {\n            opacity: 0\n        },\n        animate: {\n            opacity: 1\n        },\n        transition: {\n            duration: 0.5\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatHeader),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().chatHeaderLeft),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().logo),\n                                children: \"TM\"\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 221,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().headerInfo),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        children: \"TM AI Day Assistant\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 223,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    userLevel && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userLevel),\n                                        children: [\n                                            \"Level: \",\n                                            userLevel,\n                                            \" \",\n                                            userScore && \"(Score: \".concat(userScore, \")\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 225,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 222,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 220,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().logoutButton),\n                        onClick: onLogout,\n                        children: \"Logout\"\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 231,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 219,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messagesContainer),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.AnimatePresence, {\n                        children: messages.map((message)=>{\n                            // Skip rendering invalid messages\n                            if (!message || typeof message !== 'object') {\n                                return null;\n                            }\n                            let options = [];\n                            try {\n                                options = message.sender === 'bot' ? (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.parseOptions)(message.text) : [];\n                            } catch (error) {\n                                console.error('Error parsing options:', error);\n                            }\n                            const shouldShowOptions = competencyStatus === 'in progress' && options.length > 0;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {\n                                className: \"\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageWrapper), \" \").concat(message.sender === 'user' ? (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userMessageWrapper) : (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().botMessageWrapper)),\n                                initial: {\n                                    opacity: 0,\n                                    y: 20\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                exit: {\n                                    opacity: 0\n                                },\n                                transition: {\n                                    duration: 0.3\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"\".concat((_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().message), \" \").concat(message.sender === 'user' ? (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().userMessage) : (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().botMessage)),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageText),\n                                                children: (()=>{\n                                                    // Ensure text is a string and handle display accordingly\n                                                    const text = message.text || '';\n                                                    if (typeof text === 'string') {\n                                                        // Check if message contains an image URL\n                                                        if (message.sender === 'bot' && (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.containsImageUrl)(text)) {\n                                                            const imageUrl = (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.extractImageUrl)(text);\n                                                            // If no valid image URL found, render normal text\n                                                            if (!imageUrl) {\n                                                                return text.split('\\n').map((line, i)=>{\n                                                                    if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                        return null;\n                                                                    }\n                                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                        children: line\n                                                                    }, i, false, {\n                                                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                        lineNumber: 288,\n                                                                        columnNumber: 38\n                                                                    }, undefined);\n                                                                }).filter(Boolean);\n                                                            }\n                                                            // Create a display text without the image URL for cleaner presentation\n                                                            const displayText = text.replace(imageUrl, '').trim();\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                                children: [\n                                                                    displayText && displayText.split('\\n').map((line, i)=>{\n                                                                        if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                            return null;\n                                                                        }\n                                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                            children: line\n                                                                        }, i, false, {\n                                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                            lineNumber: 302,\n                                                                            columnNumber: 40\n                                                                        }, undefined);\n                                                                    }).filter(Boolean),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().imageContainer),\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                                            src: imageUrl,\n                                                                            alt: \"Response image\",\n                                                                            className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().responseImage),\n                                                                            onError: (e)=>{\n                                                                                console.error('Image failed to load:', imageUrl);\n                                                                                e.target.style.display = 'none';\n                                                                            }\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                            lineNumber: 307,\n                                                                            columnNumber: 33\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                        lineNumber: 306,\n                                                                        columnNumber: 31\n                                                                    }, undefined)\n                                                                ]\n                                                            }, void 0, true);\n                                                        }\n                                                        // Regular text message (no image)\n                                                        return text.split('\\n').map((line, i)=>{\n                                                            // Skip rendering lines that start with A., B., C., or D. in the textbox\n                                                            if (message.sender === 'bot' && line.match(/^[A-D]\\.\\s/)) {\n                                                                return null;\n                                                            }\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                children: line\n                                                            }, i, false, {\n                                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                                lineNumber: 327,\n                                                                columnNumber: 34\n                                                            }, undefined);\n                                                        }).filter(Boolean);\n                                                    } else {\n                                                        // For non-string content (should be rare with our improved handling)\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().fallbackMessage),\n                                                            children: (0,_utils_messageUtils__WEBPACK_IMPORTED_MODULE_3__.formatMessage)(text)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                            lineNumber: 332,\n                                                            columnNumber: 27\n                                                        }, undefined);\n                                                    }\n                                                })()\n                                            }, void 0, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 272,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().messageTime),\n                                                children: message.time || ''\n                                            }, void 0, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 339,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 267,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    shouldShowOptions && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().optionsContainer),\n                                        children: options.map((option, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {\n                                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().optionButton),\n                                                onClick: ()=>handleOptionSelect(option),\n                                                whileHover: {\n                                                    scale: 1.03\n                                                },\n                                                whileTap: {\n                                                    scale: 0.97\n                                                },\n                                                children: option\n                                            }, index, false, {\n                                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                                lineNumber: 345,\n                                                columnNumber: 23\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                        lineNumber: 343,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, message.id || Date.now() + Math.random(), true, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 257,\n                                columnNumber: 15\n                            }, undefined);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 240,\n                        columnNumber: 9\n                    }, undefined),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().typingIndicator),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 364,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 365,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().dot)\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 366,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 363,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 370,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 239,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().inputContainer),\n                onSubmit: handleSendMessage,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"text\",\n                        value: inputValue,\n                        onChange: (e)=>setInputValue(e.target.value),\n                        placeholder: \"Type your message...\",\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().input),\n                        disabled: isLoading\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 374,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {\n                        type: \"submit\",\n                        className: (_Chat_module_css__WEBPACK_IMPORTED_MODULE_4___default().sendButton),\n                        disabled: !inputValue.trim() || isLoading,\n                        whileHover: {\n                            scale: 1.05\n                        },\n                        whileTap: {\n                            scale: 0.95\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            width: \"24\",\n                            height: \"24\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"\n                            }, void 0, false, {\n                                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                                lineNumber: 390,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                            lineNumber: 389,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                        lineNumber: 382,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n                lineNumber: 373,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/balqisnaguwib/Library/CloudStorage/OneDrive-TelekomMalaysiaBerhad/Documents/AI/AI-Day/tm-ai-widget/components/Chat/Chat.jsx\",\n        lineNumber: 213,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Chat, \"rkvSJXnNUawr5gXA4zCoNTUUdck=\");\n_c = Chat;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Chat);\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2hhdC9DaGF0LmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsMkJBQTJCOzs7QUFDeUI7QUFDSTtBQUNOO0FBUWhCO0FBQ0s7QUFFdkMsK0JBQStCO0FBQy9CLE1BQU1hLFFBQVFDLGtCQUF5QjtBQUV2Qzs7Q0FFQyxHQUNELE1BQU1DLFdBQVc7cUNBQUlDO1FBQUFBOztJQUNuQixJQUFJSCxPQUFPO1FBQ1RJLFFBQVFDLEdBQUcsSUFBSUY7SUFDakI7QUFDRjtBQUVBLE1BQU1HLE9BQU87UUFBQyxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRTs7SUFDOUIsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUd2QiwrQ0FBUUEsQ0FBQyxFQUFFO0lBQzNDLE1BQU0sQ0FBQ3dCLFlBQVlDLGNBQWMsR0FBR3pCLCtDQUFRQSxDQUFDO0lBQzdDLE1BQU0sQ0FBQzBCLFdBQVdDLGFBQWEsR0FBRzNCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzRCLFNBQVNDLFdBQVcsR0FBRzdCLCtDQUFRQSxDQUFDLEVBQUU7SUFDekMsTUFBTSxDQUFDOEIsV0FBV0MsYUFBYSxHQUFHL0IsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDZ0MsV0FBV0MsYUFBYSxHQUFHakMsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDa0Msa0JBQWtCQyxvQkFBb0IsR0FBR25DLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU1vQyxpQkFBaUJsQyw2Q0FBTUEsQ0FBQztJQUU5QiwrQkFBK0I7SUFDL0IsTUFBTW1DLGlCQUFpQjtZQUNyQkQ7U0FBQUEsMEJBQUFBLGVBQWVFLE9BQU8sY0FBdEJGLDhDQUFBQSx3QkFBd0JHLGNBQWMsQ0FBQztZQUFFQyxVQUFVO1FBQVM7SUFDOUQ7SUFFQXZDLGdEQUFTQTswQkFBQztZQUNSb0M7UUFDRjt5QkFBRztRQUFDZjtLQUFTO0lBRWIsa0NBQWtDO0lBQ2xDckIsZ0RBQVNBOzBCQUFDO1lB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QUN1RztnQkFBSzNELFdBQVdwRSx3RUFBcUI7Z0JBQUVpSSxVQUFVaEY7O2tDQUNoRCw4REFBQ2lGO3dCQUNDQyxNQUFLO3dCQUNMQyxPQUFPeEg7d0JBQ1B5SCxVQUFVLENBQUNuRixJQUFNckMsY0FBY3FDLEVBQUU2RCxNQUFNLENBQUNxQixLQUFLO3dCQUM3Q0UsYUFBWTt3QkFDWmxFLFdBQVdwRSwrREFBWTt3QkFDdkJ1SSxVQUFVekg7Ozs7OztrQ0FFWiw4REFBQ3ZCLGlEQUFNQSxDQUFDMEYsTUFBTTt3QkFDWmtELE1BQUs7d0JBQ0wvRCxXQUFXcEUsb0VBQWlCO3dCQUM1QnVJLFVBQVUsQ0FBQzNILFdBQVd3QyxJQUFJLE1BQU10Qzt3QkFDaEN5RyxZQUFZOzRCQUFFQyxPQUFPO3dCQUFLO3dCQUMxQkMsVUFBVTs0QkFBRUQsT0FBTzt3QkFBSztrQ0FFeEIsNEVBQUNnQjs0QkFBSUMsT0FBTTs0QkFBNkJDLFNBQVE7NEJBQVlDLE1BQUs7NEJBQWVDLE9BQU07NEJBQUtDLFFBQU87c0NBQ2hHLDRFQUFDQztnQ0FBS0MsR0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1wQjtHQWpYTXhJO0tBQUFBO0FBbVhOLGlFQUFlQSxJQUFJQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvYmFscWlzbmFndXdpYi9MaWJyYXJ5L0Nsb3VkU3RvcmFnZS9PbmVEcml2ZS1UZWxla29tTWFsYXlzaWFCZXJoYWQvRG9jdW1lbnRzL0FJL0FJLURheS90bS1haS13aWRnZXQvY29tcG9uZW50cy9DaGF0L0NoYXQuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvQ2hhdC9DaGF0LmpzeFxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbW90aW9uLCBBbmltYXRlUHJlc2VuY2UgfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCB7IHNlbmRDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL3V0aWxzL2FwaSc7XG5pbXBvcnQgeyBcbiAgZm9ybWF0TWVzc2FnZSwgXG4gIHBhcnNlT3B0aW9ucywgXG4gIGV4dHJhY3RNZXNzYWdlRnJvbVJlc3BvbnNlLCBcbiAgaGFzVmFsaWRNZXNzYWdlLFxuICBjb250YWluc0ltYWdlVXJsLFxuICBleHRyYWN0SW1hZ2VVcmxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvbWVzc2FnZVV0aWxzJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9DaGF0Lm1vZHVsZS5jc3MnO1xuXG4vLyBFbmFibGUgb3IgZGlzYWJsZSBkZWJ1ZyBsb2dzXG5jb25zdCBERUJVRyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnO1xuXG4vKipcbiAqIExvZyBmdW5jdGlvbiB0aGF0IG9ubHkgbG9ncyBpbiBkZXZlbG9wbWVudCBtb2RlXG4gKi9cbmNvbnN0IGRlYnVnTG9nID0gKC4uLmFyZ3MpID0+IHtcbiAgaWYgKERFQlVHKSB7XG4gICAgY29uc29sZS5sb2coLi4uYXJncyk7XG4gIH1cbn07XG5cbmNvbnN0IENoYXQgPSAoeyB0bUlkLCBvbkxvZ291dCB9KSA9PiB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbaW5wdXRWYWx1ZSwgc2V0SW5wdXRWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthbnN3ZXJzLCBzZXRBbnN3ZXJzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3VzZXJMZXZlbCwgc2V0VXNlckxldmVsXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3VzZXJTY29yZSwgc2V0VXNlclNjb3JlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2NvbXBldGVuY3lTdGF0dXMsIHNldENvbXBldGVuY3lTdGF0dXNdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZihudWxsKTtcbiAgXG4gIC8vIFNjcm9sbCB0byBib3R0b20gb2YgbWVzc2FnZXNcbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gIH07XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFttZXNzYWdlc10pO1xuICBcbiAgLy8gSW5pdGlhbCBtZXNzYWdlIHdoZW4gY2hhdCBvcGVuc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxpemVDaGF0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gSW5pdGlhbCBlbXB0eSBtZXNzYWdlIHRvIGdldCB0aGUgZmlyc3QgcXVlc3Rpb24gb3Igd2VsY29tZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZENoYXRNZXNzYWdlKHRtSWQsICcnLCBhbnN3ZXJzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBtZXNzYWdlcyBmaXJzdCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb21wZXRlbmN5X3N0YXR1cyA9PT0gJ2luIHByb2dyZXNzJykge1xuICAgICAgICAgIC8vIFdlJ3JlIGluIHRoZSBzdXJ2ZXkgZmxvd1xuICAgICAgICAgIHNldENvbXBldGVuY3lTdGF0dXMoJ2luIHByb2dyZXNzJyk7XG4gICAgICAgICAgLy8gQWRkIGEgc2luZ2xlIG1lc3NhZ2VcbiAgICAgICAgICBpZiAocmVzcG9uc2UubWVzc2FnZSkge1xuICAgICAgICAgICAgYWRkQm90TWVzc2FnZShyZXNwb25zZS5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAvLyBVc2VyIGhhcyBhbHJlYWR5IGNvbXBsZXRlZCB0aGUgc3VydmV5XG4gICAgICAgICAgc2V0Q29tcGV0ZW5jeVN0YXR1cygnY29tcGxldGUnKTtcbiAgICAgICAgICBpZiAocmVzcG9uc2UubGV2ZWwpIHNldFVzZXJMZXZlbChyZXNwb25zZS5sZXZlbCk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnNjb3JlKSBzZXRVc2VyU2NvcmUocmVzcG9uc2Uuc2NvcmUpO1xuICAgICAgICAgIGlmIChoYXNWYWxpZE1lc3NhZ2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICBhZGRCb3RNZXNzYWdlKGV4dHJhY3RNZXNzYWdlRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgY2hhdDonLCBlcnJvcik7XG4gICAgICAgIGFkZEJvdE1lc3NhZ2UoJ1NvcnJ5LCB0aGVyZSB3YXMgYW4gZXJyb3IgY29ubmVjdGluZyB0byB0aGUgY2hhdCBzZXJ2aWNlLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGluaXRpYWxpemVDaGF0KCk7XG4gIH0sIFt0bUlkLCBhbnN3ZXJzXSk7IC8vIEFkZCBhbnN3ZXJzIGFzIGEgZGVwZW5kZW5jeVxuICBcbiAgY29uc3QgYWRkVXNlck1lc3NhZ2UgPSAodGV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgdGhlIHV0aWxpdHkgdG8gZW5zdXJlIHRleHQgaXMgYSBzdHJpbmdcbiAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gZm9ybWF0TWVzc2FnZSh0ZXh0KTtcbiAgICAgIFxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyBcbiAgICAgICAgaWQ6IERhdGUubm93KCksIFxuICAgICAgICB0ZXh0OiBtZXNzYWdlVGV4dCwgXG4gICAgICAgIHNlbmRlcjogJ3VzZXInLFxuICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pXG4gICAgICB9XSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyB1c2VyIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGFkZEJvdE1lc3NhZ2UgPSAodGV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgdGhlIHV0aWxpdHkgdG8gZW5zdXJlIHRleHQgaXMgYSBzdHJpbmdcbiAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gZm9ybWF0TWVzc2FnZSh0ZXh0KTtcbiAgICAgIGRlYnVnTG9nKCdBZGRpbmcgYm90IG1lc3NhZ2U6JywgbWVzc2FnZVRleHQpO1xuICAgICAgXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IFxuICAgICAgICBpZDogRGF0ZS5ub3coKSwgXG4gICAgICAgIHRleHQ6IG1lc3NhZ2VUZXh0LCBcbiAgICAgICAgc2VuZGVyOiAnYm90JyxcbiAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KVxuICAgICAgfV0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgYm90IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgLy8gQWRkIGEgZmFsbGJhY2sgbWVzc2FnZSB0byBub3QgYnJlYWsgdGhlIFVJXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IFxuICAgICAgICBpZDogRGF0ZS5ub3coKSwgXG4gICAgICAgIHRleHQ6ICdFcnJvciBkaXNwbGF5aW5nIG1lc3NhZ2UnLCBcbiAgICAgICAgc2VuZGVyOiAnYm90JyxcbiAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KVxuICAgICAgfV0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGhhbmRsZVNlbmRNZXNzYWdlID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgXG4gICAgaWYgKCFpbnB1dFZhbHVlLnRyaW0oKSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHVzZXJUZXh0ID0gaW5wdXRWYWx1ZS50cmltKCk7XG4gICAgc2V0SW5wdXRWYWx1ZSgnJyk7XG4gICAgYWRkVXNlck1lc3NhZ2UodXNlclRleHQpO1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gSWYgaW4gY29tcGV0ZW5jeSB0ZXN0LCBjaGVjayBpZiB0aGlzIGlzIGFuIGFuc3dlciB0byBhIHF1ZXN0aW9uXG4gICAgICBsZXQgdXBkYXRlZEFuc3dlcnMgPSBbLi4uYW5zd2Vyc107XG4gICAgICBcbiAgICAgIGlmIChjb21wZXRlbmN5U3RhdHVzID09PSAnaW4gcHJvZ3Jlc3MnKSB7XG4gICAgICAgIC8vIFdlJ3JlIGluIHRoZSBzdXJ2ZXkgZmxvdywgdHJlYXQgaW5wdXQgYXMgYW4gYW5zd2VyXG4gICAgICAgIHVwZGF0ZWRBbnN3ZXJzLnB1c2godXNlclRleHQpO1xuICAgICAgICBzZXRBbnN3ZXJzKHVwZGF0ZWRBbnN3ZXJzKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kQ2hhdE1lc3NhZ2UodG1JZCwgdXNlclRleHQsIHVwZGF0ZWRBbnN3ZXJzKTtcbiAgICAgIFxuICAgICAgZGVidWdMb2coJ0FQSSByZXNwb25zZSBwcm9jZXNzZWQ6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc3RhdGUgYmFzZWQgb24gcmVzcG9uc2VcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb21wZXRlbmN5X3N0YXR1cyA9PT0gJ2NvbXBsZXRlJyAmJiBjb21wZXRlbmN5U3RhdHVzID09PSAnaW4gcHJvZ3Jlc3MnKSB7XG4gICAgICAgIC8vIFVzZXIganVzdCBjb21wbGV0ZWQgdGhlIHN1cnZleVxuICAgICAgICBzZXRDb21wZXRlbmN5U3RhdHVzKCdjb21wbGV0ZScpO1xuICAgICAgICBpZiAocmVzcG9uc2UubGV2ZWwpIHNldFVzZXJMZXZlbChyZXNwb25zZS5sZXZlbCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zY29yZSkgc2V0VXNlclNjb3JlKHJlc3BvbnNlLnNjb3JlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFdoZW4gY29tcGxldGluZyB0aGUgY29tcGV0ZW5jeSB0ZXN0LCBvbmx5IGRpc3BsYXkgdGhlIGNvbmdyYXR1bGF0aW9ucyBtZXNzYWdlXG4gICAgICAgIC8vIHdoaWNoIGFscmVhZHkgY29udGFpbnMgdGhlIGNvbXBldGVuY3kgbGV2ZWwgYW5kIHNjb3JlXG4gICAgICAgIGlmIChoYXNWYWxpZE1lc3NhZ2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgYWRkQm90TWVzc2FnZShtZXNzYWdlQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMgPT09ICdpbiBwcm9ncmVzcycpIHtcbiAgICAgICAgc2V0Q29tcGV0ZW5jeVN0YXR1cygnaW4gcHJvZ3Jlc3MnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBtZXNzYWdlIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICAgIGlmIChoYXNWYWxpZE1lc3NhZ2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgYWRkQm90TWVzc2FnZShtZXNzYWdlQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vcm1hbCBjb252ZXJzYXRpb24gZmxvdywgbm90IHBhcnQgb2YgY29tcGV0ZW5jeSB0ZXN0XG4gICAgICAgIGlmIChoYXNWYWxpZE1lc3NhZ2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgYWRkQm90TWVzc2FnZShtZXNzYWdlQ29udGVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBkZWJ1Z0xvZygnTm8gbWVzc2FnZSBmb3VuZCBpbiByZXNwb25zZScpO1xuICAgICAgICAgIGFkZEJvdE1lc3NhZ2UoJ1Jlc3BvbnNlIHJlY2VpdmVkIGJ1dCBubyBtZXNzYWdlIGZvdW5kLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBhZGRCb3RNZXNzYWdlKCdTb3JyeSwgdGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciBtZXNzYWdlLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEhhbmRsZSBvcHRpb24gc2VsZWN0aW9uIGZvciBtdWx0aXBsZSBjaG9pY2UgcXVlc3Rpb25zXG4gIGNvbnN0IGhhbmRsZU9wdGlvblNlbGVjdCA9IChvcHRpb24pID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgb3B0aW9uIGlzIHZhbGlkXG4gICAgICBpZiAoIW9wdGlvbiB8fCB0eXBlb2Ygb3B0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIG9wdGlvbjonLCBvcHRpb24pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgdGhlIG9wdGlvbiBsZXR0ZXIgKEEsIEIsIEMsIEQpXG4gICAgICBjb25zdCBvcHRpb25MZXR0ZXIgPSBvcHRpb24uc3BsaXQoJy4nKVswXS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHNldElucHV0VmFsdWUob3B0aW9uTGV0dGVyKTtcbiAgICAgIFxuICAgICAgLy8gQXV0by1zdWJtaXQgdGhlIGZvcm0gd2hlbiBhbiBvcHRpb24gaXMgc2VsZWN0ZWRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBzZW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7c3R5bGVzLnNlbmRCdXR0b259YCk7XG4gICAgICAgIGlmIChzZW5kQnV0dG9uKSB7XG4gICAgICAgICAgc2VuZEJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWxlY3Rpbmcgb3B0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICByZXR1cm4gKFxuICAgIDxtb3Rpb24uZGl2IFxuICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuY2hhdENvbnRhaW5lcn1cbiAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCB9fVxuICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxIH19XG4gICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjUgfX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNoYXRIZWFkZXJ9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNoYXRIZWFkZXJMZWZ0fT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmxvZ299PlRNPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXJJbmZvfT5cbiAgICAgICAgICAgIDxoMz5UTSBBSSBEYXkgQXNzaXN0YW50PC9oMz5cbiAgICAgICAgICAgIHt1c2VyTGV2ZWwgJiYgKFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy51c2VyTGV2ZWx9PlxuICAgICAgICAgICAgICAgIExldmVsOiB7dXNlckxldmVsfSB7dXNlclNjb3JlICYmIGAoU2NvcmU6ICR7dXNlclNjb3JlfSlgfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5sb2dvdXRCdXR0b259IFxuICAgICAgICAgIG9uQ2xpY2s9e29uTG9nb3V0fVxuICAgICAgICA+XG4gICAgICAgICAgTG9nb3V0XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubWVzc2FnZXNDb250YWluZXJ9PlxuICAgICAgICA8QW5pbWF0ZVByZXNlbmNlPlxuICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIC8vIFNraXAgcmVuZGVyaW5nIGludmFsaWQgbWVzc2FnZXNcbiAgICAgICAgICAgIGlmICghbWVzc2FnZSB8fCB0eXBlb2YgbWVzc2FnZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0gW107XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBvcHRpb25zID0gbWVzc2FnZS5zZW5kZXIgPT09ICdib3QnID8gcGFyc2VPcHRpb25zKG1lc3NhZ2UudGV4dCkgOiBbXTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgb3B0aW9uczonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFNob3dPcHRpb25zID0gY29tcGV0ZW5jeVN0YXR1cyA9PT0gJ2luIHByb2dyZXNzJyAmJiBvcHRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxtb3Rpb24uZGl2XG4gICAgICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkIHx8IERhdGUubm93KCkgKyBNYXRoLnJhbmRvbSgpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzLm1lc3NhZ2VXcmFwcGVyfSAke1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyA/IHN0eWxlcy51c2VyTWVzc2FnZVdyYXBwZXIgOiBzdHlsZXMuYm90TWVzc2FnZVdyYXBwZXJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDIwIH19XG4gICAgICAgICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19XG4gICAgICAgICAgICAgICAgZXhpdD17eyBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC4zIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZXMubWVzc2FnZX0gJHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyA/IHN0eWxlcy51c2VyTWVzc2FnZSA6IHN0eWxlcy5ib3RNZXNzYWdlXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm1lc3NhZ2VUZXh0fT5cbiAgICAgICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRleHQgaXMgYSBzdHJpbmcgYW5kIGhhbmRsZSBkaXNwbGF5IGFjY29yZGluZ2x5XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1lc3NhZ2UudGV4dCB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtZXNzYWdlIGNvbnRhaW5zIGFuIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiBjb250YWluc0ltYWdlVXJsKHRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlVXJsID0gZXh0cmFjdEltYWdlVXJsKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm8gdmFsaWQgaW1hZ2UgVVJMIGZvdW5kLCByZW5kZXIgbm9ybWFsIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KCdcXG4nKS5tYXAoKGxpbmUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgbGluZS5tYXRjaCgvXltBLURdXFwuXFxzLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHAga2V5PXtpfT57bGluZX08L3A+O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGlzcGxheSB0ZXh0IHdpdGhvdXQgdGhlIGltYWdlIFVSTCBmb3IgY2xlYW5lciBwcmVzZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVRleHQgPSB0ZXh0LnJlcGxhY2UoaW1hZ2VVcmwsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogRGlzcGxheSB0ZXh0IGNvbnRlbnQgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheVRleHQgJiYgZGlzcGxheVRleHQuc3BsaXQoJ1xcbicpLm1hcCgobGluZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgPT09ICdib3QnICYmIGxpbmUubWF0Y2goL15bQS1EXVxcLlxccy8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxwIGtleT17aX0+e2xpbmV9PC9wPjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihCb29sZWFuKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIERpc3BsYXkgdGhlIGltYWdlICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5pbWFnZUNvbnRhaW5lcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtpbWFnZVVybH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiUmVzcG9uc2UgaW1hZ2VcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5yZXNwb25zZUltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbWFnZSBmYWlsZWQgdG8gbG9hZDonLCBpbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVndWxhciB0ZXh0IG1lc3NhZ2UgKG5vIGltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoJ1xcbicpLm1hcCgobGluZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHJlbmRlcmluZyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggQS4sIEIuLCBDLiwgb3IgRC4gaW4gdGhlIHRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiBsaW5lLm1hdGNoKC9eW0EtRF1cXC5cXHMvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8cCBrZXk9e2l9PntsaW5lfTwvcD47XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24tc3RyaW5nIGNvbnRlbnQgKHNob3VsZCBiZSByYXJlIHdpdGggb3VyIGltcHJvdmVkIGhhbmRsaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtzdHlsZXMuZmFsbGJhY2tNZXNzYWdlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0TWVzc2FnZSh0ZXh0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubWVzc2FnZVRpbWV9PnttZXNzYWdlLnRpbWUgfHwgJyd9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3Nob3VsZFNob3dPcHRpb25zICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMub3B0aW9uc0NvbnRhaW5lcn0+XG4gICAgICAgICAgICAgICAgICAgIHtvcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMub3B0aW9uQnV0dG9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlT3B0aW9uU2VsZWN0KG9wdGlvbil9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAzIH19XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45NyB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvQW5pbWF0ZVByZXNlbmNlPlxuICAgICAgICBcbiAgICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50eXBpbmdJbmRpY2F0b3J9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kb3R9PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kb3R9PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kb3R9PjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICBcbiAgICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxmb3JtIGNsYXNzTmFtZT17c3R5bGVzLmlucHV0Q29udGFpbmVyfSBvblN1Ym1pdD17aGFuZGxlU2VuZE1lc3NhZ2V9PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFsdWU9e2lucHV0VmFsdWV9XG4gICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJbnB1dFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5pbnB1dH1cbiAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAvPlxuICAgICAgICA8bW90aW9uLmJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlbmRCdXR0b259XG4gICAgICAgICAgZGlzYWJsZWQ9eyFpbnB1dFZhbHVlLnRyaW0oKSB8fCBpc0xvYWRpbmd9XG4gICAgICAgICAgd2hpbGVIb3Zlcj17eyBzY2FsZTogMS4wNSB9fVxuICAgICAgICAgIHdoaWxlVGFwPXt7IHNjYWxlOiAwLjk1IH19XG4gICAgICAgID5cbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0yLjAxIDIxTDIzIDEyIDIuMDEgMyAyIDEwbDE1IDItMTUgMnpcIj48L3BhdGg+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICA8L21vdGlvbi5kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0O1xuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwibW90aW9uIiwiQW5pbWF0ZVByZXNlbmNlIiwic2VuZENoYXRNZXNzYWdlIiwiZm9ybWF0TWVzc2FnZSIsInBhcnNlT3B0aW9ucyIsImV4dHJhY3RNZXNzYWdlRnJvbVJlc3BvbnNlIiwiaGFzVmFsaWRNZXNzYWdlIiwiY29udGFpbnNJbWFnZVVybCIsImV4dHJhY3RJbWFnZVVybCIsInN0eWxlcyIsIkRFQlVHIiwicHJvY2VzcyIsImRlYnVnTG9nIiwiYXJncyIsImNvbnNvbGUiLCJsb2ciLCJDaGF0IiwidG1JZCIsIm9uTG9nb3V0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0VmFsdWUiLCJzZXRJbnB1dFZhbHVlIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiYW5zd2VycyIsInNldEFuc3dlcnMiLCJ1c2VyTGV2ZWwiLCJzZXRVc2VyTGV2ZWwiLCJ1c2VyU2NvcmUiLCJzZXRVc2VyU2NvcmUiLCJjb21wZXRlbmN5U3RhdHVzIiwic2V0Q29tcGV0ZW5jeVN0YXR1cyIsIm1lc3NhZ2VzRW5kUmVmIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImluaXRpYWxpemVDaGF0IiwicmVzcG9uc2UiLCJjb21wZXRlbmN5X3N0YXR1cyIsIm1lc3NhZ2UiLCJhZGRCb3RNZXNzYWdlIiwibGV2ZWwiLCJzY29yZSIsImVycm9yIiwiYWRkVXNlck1lc3NhZ2UiLCJ0ZXh0IiwibWVzc2FnZVRleHQiLCJwcmV2IiwiaWQiLCJEYXRlIiwibm93Iiwic2VuZGVyIiwidGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJoYW5kbGVTZW5kTWVzc2FnZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJ1c2VyVGV4dCIsInVwZGF0ZWRBbnN3ZXJzIiwicHVzaCIsIm1lc3NhZ2VDb250ZW50IiwiaGFuZGxlT3B0aW9uU2VsZWN0Iiwib3B0aW9uIiwib3B0aW9uTGV0dGVyIiwic3BsaXQiLCJ0b0xvd2VyQ2FzZSIsInNldFRpbWVvdXQiLCJzZW5kQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xpY2siLCJkaXYiLCJjbGFzc05hbWUiLCJjaGF0Q29udGFpbmVyIiwiaW5pdGlhbCIsIm9wYWNpdHkiLCJhbmltYXRlIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiY2hhdEhlYWRlciIsImNoYXRIZWFkZXJMZWZ0IiwibG9nbyIsImhlYWRlckluZm8iLCJoMyIsInNwYW4iLCJidXR0b24iLCJsb2dvdXRCdXR0b24iLCJvbkNsaWNrIiwibWVzc2FnZXNDb250YWluZXIiLCJtYXAiLCJvcHRpb25zIiwic2hvdWxkU2hvd09wdGlvbnMiLCJsZW5ndGgiLCJtZXNzYWdlV3JhcHBlciIsInVzZXJNZXNzYWdlV3JhcHBlciIsImJvdE1lc3NhZ2VXcmFwcGVyIiwieSIsImV4aXQiLCJ1c2VyTWVzc2FnZSIsImJvdE1lc3NhZ2UiLCJpbWFnZVVybCIsImxpbmUiLCJpIiwibWF0Y2giLCJwIiwiZmlsdGVyIiwiQm9vbGVhbiIsImRpc3BsYXlUZXh0IiwicmVwbGFjZSIsImltYWdlQ29udGFpbmVyIiwiaW1nIiwic3JjIiwiYWx0IiwicmVzcG9uc2VJbWFnZSIsIm9uRXJyb3IiLCJ0YXJnZXQiLCJzdHlsZSIsImRpc3BsYXkiLCJmYWxsYmFja01lc3NhZ2UiLCJtZXNzYWdlVGltZSIsIm9wdGlvbnNDb250YWluZXIiLCJpbmRleCIsIm9wdGlvbkJ1dHRvbiIsIndoaWxlSG92ZXIiLCJzY2FsZSIsIndoaWxlVGFwIiwiTWF0aCIsInJhbmRvbSIsInR5cGluZ0luZGljYXRvciIsImRvdCIsInJlZiIsImZvcm0iLCJpbnB1dENvbnRhaW5lciIsIm9uU3VibWl0IiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwid2lkdGgiLCJoZWlnaHQiLCJwYXRoIiwiZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/Chat/Chat.jsx\n"));

/***/ }),

/***/ "(pages-dir-browser)/./utils/messageUtils.js":
/*!*******************************!*\
  !*** ./utils/messageUtils.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   containsImageUrl: () => (/* binding */ containsImageUrl),\n/* harmony export */   extractImageUrl: () => (/* binding */ extractImageUrl),\n/* harmony export */   extractMessageFromResponse: () => (/* binding */ extractMessageFromResponse),\n/* harmony export */   formatMessage: () => (/* binding */ formatMessage),\n/* harmony export */   hasValidMessage: () => (/* binding */ hasValidMessage),\n/* harmony export */   parseOptions: () => (/* binding */ parseOptions)\n/* harmony export */ });\n// utils/messageUtils.js\n/**\n * Utility functions for message handling and formatting\n */ /**\n * Formats message data to ensure it's in a consistent string format\n * @param {any} messageData - The message data to format (could be string, object, null, etc.)\n * @returns {string} - The formatted message string\n */ const formatMessage = (messageData)=>{\n    // Handle undefined/null case\n    if (messageData === undefined || messageData === null) {\n        return '';\n    }\n    // Handle string case\n    if (typeof messageData === 'string') {\n        return messageData;\n    }\n    // Handle object case\n    if (typeof messageData === 'object') {\n        // Try to extract text from common object structures\n        if (messageData.text) {\n            return messageData.text;\n        } else if (messageData.content) {\n            return messageData.content;\n        } else if (messageData.message) {\n            return messageData.message;\n        } else {\n            try {\n                return JSON.stringify(messageData, null, 2);\n            } catch (error) {\n                console.error('Error stringifying message object:', error);\n                return '[Complex object]';\n            }\n        }\n    }\n    // Handle other types (number, boolean, etc.)\n    return String(messageData);\n};\n/**\n * Parse multiple choice options from a message text\n * @param {string} messageText - The message text to parse\n * @returns {string[]} - Array of option strings\n */ const parseOptions = (messageText)=>{\n    const formattedText = formatMessage(messageText);\n    const options = [];\n    if (!formattedText) {\n        return options;\n    }\n    const lines = formattedText.split('\\n');\n    // Extract options (A., B., C., D. format)\n    for (const line of lines){\n        if (line.match(/^[A-D]\\.\\s/)) {\n            options.push(line.trim());\n        }\n    }\n    return options;\n};\n/**\n * Checks if a response contains a valid message\n * @param {object} response - The API response object\n * @returns {boolean} - Whether the response has a valid message\n */ const hasValidMessage = (response)=>{\n    return response && (response.message !== undefined || typeof response === 'string' || typeof response === 'object' && !response.competency_status);\n};\n/**\n * Extracts the message content from a response\n * @param {object} response - The API response object\n * @returns {string} - The extracted message content\n */ const extractMessageFromResponse = (response)=>{\n    if (!response) {\n        return '';\n    }\n    if (response.message !== undefined) {\n        return response.message;\n    } else if (typeof response === 'string') {\n        return response;\n    } else if (typeof response === 'object' && !response.competency_status) {\n        return response;\n    }\n    return '';\n};\n/**\n * Checks if a text contains an image URL\n * @param {string} text - Text to check for image URLs\n * @returns {boolean} - Whether the text contains an image URL\n */ const containsImageUrl = (text)=>{\n    if (!text || typeof text !== 'string') return false;\n    // Check for common image extensions\n    const imageExtensionRegex = /https?:\\/\\/\\S+\\.(jpg|jpeg|png|gif|bmp|webp|svg)(\\?.*)?(\\s|$)/i;\n    // Check for Google Drive image links specifically - note the updated pattern\n    const driveImageRegex = /https?:\\/\\/drive\\.(?:google\\.)?usercontent\\.google\\.com\\/(?:download|view)\\S*/i;\n    // Check for content IDs in Google Drive links\n    const driveContentRegex = /id=[\\w-]+/i;\n    return imageExtensionRegex.test(text) || driveImageRegex.test(text) && driveContentRegex.test(text);\n};\n/**\n * Extracts image URL from text\n * @param {string} text - Text containing an image URL\n * @returns {string|null} - The extracted image URL or null if not found\n */ const extractImageUrl = (text)=>{\n    if (!text || typeof text !== 'string') return null;\n    // Try to match standard image URLs first\n    const imageMatch = text.match(/https?:\\/\\/\\S+\\.(jpg|jpeg|png|gif|bmp|webp|svg)(\\?[^\"'\\s]*)?/i);\n    if (imageMatch) return imageMatch[0];\n    // Try to match Google Drive image URLs\n    const driveMatch = text.match(/https?:\\/\\/drive\\.(?:google\\.)?usercontent\\.google\\.com\\/\\S+?(?=[\\s\"']|$)/i);\n    if (driveMatch) return driveMatch[0];\n    return null;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3V0aWxzL21lc3NhZ2VVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSx3QkFBd0I7QUFDeEI7O0NBRUMsR0FFRDs7OztDQUlDLEdBQ00sTUFBTUEsZ0JBQWdCLENBQUNDO0lBQzVCLDZCQUE2QjtJQUM3QixJQUFJQSxnQkFBZ0JDLGFBQWFELGdCQUFnQixNQUFNO1FBQ3JELE9BQU87SUFDVDtJQUVBLHFCQUFxQjtJQUNyQixJQUFJLE9BQU9BLGdCQUFnQixVQUFVO1FBQ25DLE9BQU9BO0lBQ1Q7SUFFQSxxQkFBcUI7SUFDckIsSUFBSSxPQUFPQSxnQkFBZ0IsVUFBVTtRQUNuQyxvREFBb0Q7UUFDcEQsSUFBSUEsWUFBWUUsSUFBSSxFQUFFO1lBQ3BCLE9BQU9GLFlBQVlFLElBQUk7UUFDekIsT0FBTyxJQUFJRixZQUFZRyxPQUFPLEVBQUU7WUFDOUIsT0FBT0gsWUFBWUcsT0FBTztRQUM1QixPQUFPLElBQUlILFlBQVlJLE9BQU8sRUFBRTtZQUM5QixPQUFPSixZQUFZSSxPQUFPO1FBQzVCLE9BQU87WUFDTCxJQUFJO2dCQUNGLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ04sYUFBYSxNQUFNO1lBQzNDLEVBQUUsT0FBT08sT0FBTztnQkFDZEMsUUFBUUQsS0FBSyxDQUFDLHNDQUFzQ0E7Z0JBQ3BELE9BQU87WUFDVDtRQUNGO0lBQ0Y7SUFFQSw2Q0FBNkM7SUFDN0MsT0FBT0UsT0FBT1Q7QUFDaEIsRUFBRTtBQUVGOzs7O0NBSUMsR0FDTSxNQUFNVSxlQUFlLENBQUNDO0lBQzNCLE1BQU1DLGdCQUFnQmIsY0FBY1k7SUFDcEMsTUFBTUUsVUFBVSxFQUFFO0lBRWxCLElBQUksQ0FBQ0QsZUFBZTtRQUNsQixPQUFPQztJQUNUO0lBRUEsTUFBTUMsUUFBUUYsY0FBY0csS0FBSyxDQUFDO0lBRWxDLDBDQUEwQztJQUMxQyxLQUFLLE1BQU1DLFFBQVFGLE1BQU87UUFDeEIsSUFBSUUsS0FBS0MsS0FBSyxDQUFDLGVBQWU7WUFDNUJKLFFBQVFLLElBQUksQ0FBQ0YsS0FBS0csSUFBSTtRQUN4QjtJQUNGO0lBRUEsT0FBT047QUFDVCxFQUFFO0FBRUY7Ozs7Q0FJQyxHQUNNLE1BQU1PLGtCQUFrQixDQUFDQztJQUM5QixPQUFPQSxZQUNMQSxDQUFBQSxTQUFTakIsT0FBTyxLQUFLSCxhQUNyQixPQUFPb0IsYUFBYSxZQUNuQixPQUFPQSxhQUFhLFlBQVksQ0FBQ0EsU0FBU0MsaUJBQWlCO0FBRWhFLEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTUMsNkJBQTZCLENBQUNGO0lBQ3pDLElBQUksQ0FBQ0EsVUFBVTtRQUNiLE9BQU87SUFDVDtJQUVBLElBQUlBLFNBQVNqQixPQUFPLEtBQUtILFdBQVc7UUFDbEMsT0FBT29CLFNBQVNqQixPQUFPO0lBQ3pCLE9BQU8sSUFBSSxPQUFPaUIsYUFBYSxVQUFVO1FBQ3ZDLE9BQU9BO0lBQ1QsT0FBTyxJQUFJLE9BQU9BLGFBQWEsWUFBWSxDQUFDQSxTQUFTQyxpQkFBaUIsRUFBRTtRQUN0RSxPQUFPRDtJQUNUO0lBRUEsT0FBTztBQUNULEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTUcsbUJBQW1CLENBQUN0QjtJQUMvQixJQUFJLENBQUNBLFFBQVEsT0FBT0EsU0FBUyxVQUFVLE9BQU87SUFFOUMsb0NBQW9DO0lBQ3BDLE1BQU11QixzQkFBc0I7SUFFNUIsNkVBQTZFO0lBQzdFLE1BQU1DLGtCQUFrQjtJQUV4Qiw4Q0FBOEM7SUFDOUMsTUFBTUMsb0JBQW9CO0lBRTFCLE9BQVFGLG9CQUFvQkcsSUFBSSxDQUFDMUIsU0FDekJ3QixnQkFBZ0JFLElBQUksQ0FBQzFCLFNBQVN5QixrQkFBa0JDLElBQUksQ0FBQzFCO0FBQy9ELEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTTJCLGtCQUFrQixDQUFDM0I7SUFDOUIsSUFBSSxDQUFDQSxRQUFRLE9BQU9BLFNBQVMsVUFBVSxPQUFPO0lBRTlDLHlDQUF5QztJQUN6QyxNQUFNNEIsYUFBYTVCLEtBQUtlLEtBQUssQ0FBQztJQUM5QixJQUFJYSxZQUFZLE9BQU9BLFVBQVUsQ0FBQyxFQUFFO0lBRXBDLHVDQUF1QztJQUN2QyxNQUFNQyxhQUFhN0IsS0FBS2UsS0FBSyxDQUFDO0lBQzlCLElBQUljLFlBQVksT0FBT0EsVUFBVSxDQUFDLEVBQUU7SUFFcEMsT0FBTztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9iYWxxaXNuYWd1d2liL0xpYnJhcnkvQ2xvdWRTdG9yYWdlL09uZURyaXZlLVRlbGVrb21NYWxheXNpYUJlcmhhZC9Eb2N1bWVudHMvQUkvQUktRGF5L3RtLWFpLXdpZGdldC91dGlscy9tZXNzYWdlVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXRpbHMvbWVzc2FnZVV0aWxzLmpzXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtZXNzYWdlIGhhbmRsaW5nIGFuZCBmb3JtYXR0aW5nXG4gKi9cblxuLyoqXG4gKiBGb3JtYXRzIG1lc3NhZ2UgZGF0YSB0byBlbnN1cmUgaXQncyBpbiBhIGNvbnNpc3RlbnQgc3RyaW5nIGZvcm1hdFxuICogQHBhcmFtIHthbnl9IG1lc3NhZ2VEYXRhIC0gVGhlIG1lc3NhZ2UgZGF0YSB0byBmb3JtYXQgKGNvdWxkIGJlIHN0cmluZywgb2JqZWN0LCBudWxsLCBldGMuKVxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgZm9ybWF0dGVkIG1lc3NhZ2Ugc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBmb3JtYXRNZXNzYWdlID0gKG1lc3NhZ2VEYXRhKSA9PiB7XG4gIC8vIEhhbmRsZSB1bmRlZmluZWQvbnVsbCBjYXNlXG4gIGlmIChtZXNzYWdlRGF0YSA9PT0gdW5kZWZpbmVkIHx8IG1lc3NhZ2VEYXRhID09PSBudWxsKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIFxuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VcbiAgaWYgKHR5cGVvZiBtZXNzYWdlRGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbWVzc2FnZURhdGE7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBvYmplY3QgY2FzZVxuICBpZiAodHlwZW9mIG1lc3NhZ2VEYXRhID09PSAnb2JqZWN0Jykge1xuICAgIC8vIFRyeSB0byBleHRyYWN0IHRleHQgZnJvbSBjb21tb24gb2JqZWN0IHN0cnVjdHVyZXNcbiAgICBpZiAobWVzc2FnZURhdGEudGV4dCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2VEYXRhLnRleHQ7XG4gICAgfSBlbHNlIGlmIChtZXNzYWdlRGF0YS5jb250ZW50KSB7XG4gICAgICByZXR1cm4gbWVzc2FnZURhdGEuY29udGVudDtcbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2VEYXRhLm1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlRGF0YS5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWVzc2FnZURhdGEsIG51bGwsIDIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RyaW5naWZ5aW5nIG1lc3NhZ2Ugb2JqZWN0OicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuICdbQ29tcGxleCBvYmplY3RdJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBvdGhlciB0eXBlcyAobnVtYmVyLCBib29sZWFuLCBldGMuKVxuICByZXR1cm4gU3RyaW5nKG1lc3NhZ2VEYXRhKTtcbn07XG5cbi8qKlxuICogUGFyc2UgbXVsdGlwbGUgY2hvaWNlIG9wdGlvbnMgZnJvbSBhIG1lc3NhZ2UgdGV4dFxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VUZXh0IC0gVGhlIG1lc3NhZ2UgdGV4dCB0byBwYXJzZVxuICogQHJldHVybnMge3N0cmluZ1tdfSAtIEFycmF5IG9mIG9wdGlvbiBzdHJpbmdzXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZU9wdGlvbnMgPSAobWVzc2FnZVRleHQpID0+IHtcbiAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGZvcm1hdE1lc3NhZ2UobWVzc2FnZVRleHQpO1xuICBjb25zdCBvcHRpb25zID0gW107XG4gIFxuICBpZiAoIWZvcm1hdHRlZFRleHQpIHtcbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuICBcbiAgY29uc3QgbGluZXMgPSBmb3JtYXR0ZWRUZXh0LnNwbGl0KCdcXG4nKTtcbiAgXG4gIC8vIEV4dHJhY3Qgb3B0aW9ucyAoQS4sIEIuLCBDLiwgRC4gZm9ybWF0KVxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICBpZiAobGluZS5tYXRjaCgvXltBLURdXFwuXFxzLykpIHtcbiAgICAgIG9wdGlvbnMucHVzaChsaW5lLnRyaW0oKSk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgcmVzcG9uc2UgY29udGFpbnMgYSB2YWxpZCBtZXNzYWdlXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgLSBUaGUgQVBJIHJlc3BvbnNlIG9iamVjdFxuICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciB0aGUgcmVzcG9uc2UgaGFzIGEgdmFsaWQgbWVzc2FnZVxuICovXG5leHBvcnQgY29uc3QgaGFzVmFsaWRNZXNzYWdlID0gKHJlc3BvbnNlKSA9PiB7XG4gIHJldHVybiByZXNwb25zZSAmJiAoXG4gICAgcmVzcG9uc2UubWVzc2FnZSAhPT0gdW5kZWZpbmVkIHx8IFxuICAgIHR5cGVvZiByZXNwb25zZSA9PT0gJ3N0cmluZycgfHxcbiAgICAodHlwZW9mIHJlc3BvbnNlID09PSAnb2JqZWN0JyAmJiAhcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMpXG4gICk7XG59O1xuXG4vKipcbiAqIEV4dHJhY3RzIHRoZSBtZXNzYWdlIGNvbnRlbnQgZnJvbSBhIHJlc3BvbnNlXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgLSBUaGUgQVBJIHJlc3BvbnNlIG9iamVjdFxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgZXh0cmFjdGVkIG1lc3NhZ2UgY29udGVudFxuICovXG5leHBvcnQgY29uc3QgZXh0cmFjdE1lc3NhZ2VGcm9tUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgaWYgKCFyZXNwb25zZSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBcbiAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByZXNwb25zZS5tZXNzYWdlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiByZXNwb25zZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHJlc3BvbnNlID09PSAnb2JqZWN0JyAmJiAhcmVzcG9uc2UuY29tcGV0ZW5jeV9zdGF0dXMpIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbiAgXG4gIHJldHVybiAnJztcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgdGV4dCBjb250YWlucyBhbiBpbWFnZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGV4dCB0byBjaGVjayBmb3IgaW1hZ2UgVVJMc1xuICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciB0aGUgdGV4dCBjb250YWlucyBhbiBpbWFnZSBVUkxcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbnRhaW5zSW1hZ2VVcmwgPSAodGV4dCkgPT4ge1xuICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgY29tbW9uIGltYWdlIGV4dGVuc2lvbnNcbiAgY29uc3QgaW1hZ2VFeHRlbnNpb25SZWdleCA9IC9odHRwcz86XFwvXFwvXFxTK1xcLihqcGd8anBlZ3xwbmd8Z2lmfGJtcHx3ZWJwfHN2ZykoXFw/LiopPyhcXHN8JCkvaTtcbiAgXG4gIC8vIENoZWNrIGZvciBHb29nbGUgRHJpdmUgaW1hZ2UgbGlua3Mgc3BlY2lmaWNhbGx5IC0gbm90ZSB0aGUgdXBkYXRlZCBwYXR0ZXJuXG4gIGNvbnN0IGRyaXZlSW1hZ2VSZWdleCA9IC9odHRwcz86XFwvXFwvZHJpdmVcXC4oPzpnb29nbGVcXC4pP3VzZXJjb250ZW50XFwuZ29vZ2xlXFwuY29tXFwvKD86ZG93bmxvYWR8dmlldylcXFMqL2k7XG4gIFxuICAvLyBDaGVjayBmb3IgY29udGVudCBJRHMgaW4gR29vZ2xlIERyaXZlIGxpbmtzXG4gIGNvbnN0IGRyaXZlQ29udGVudFJlZ2V4ID0gL2lkPVtcXHctXSsvaTtcbiAgXG4gIHJldHVybiAoaW1hZ2VFeHRlbnNpb25SZWdleC50ZXN0KHRleHQpIHx8IFxuICAgICAgICAgKGRyaXZlSW1hZ2VSZWdleC50ZXN0KHRleHQpICYmIGRyaXZlQ29udGVudFJlZ2V4LnRlc3QodGV4dCkpKTtcbn07XG5cbi8qKlxuICogRXh0cmFjdHMgaW1hZ2UgVVJMIGZyb20gdGV4dFxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUZXh0IGNvbnRhaW5pbmcgYW4gaW1hZ2UgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IC0gVGhlIGV4dHJhY3RlZCBpbWFnZSBVUkwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGNvbnN0IGV4dHJhY3RJbWFnZVVybCA9ICh0ZXh0KSA9PiB7XG4gIGlmICghdGV4dCB8fCB0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xuICBcbiAgLy8gVHJ5IHRvIG1hdGNoIHN0YW5kYXJkIGltYWdlIFVSTHMgZmlyc3RcbiAgY29uc3QgaW1hZ2VNYXRjaCA9IHRleHQubWF0Y2goL2h0dHBzPzpcXC9cXC9cXFMrXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wfHdlYnB8c3ZnKShcXD9bXlwiJ1xcc10qKT8vaSk7XG4gIGlmIChpbWFnZU1hdGNoKSByZXR1cm4gaW1hZ2VNYXRjaFswXTtcbiAgXG4gIC8vIFRyeSB0byBtYXRjaCBHb29nbGUgRHJpdmUgaW1hZ2UgVVJMc1xuICBjb25zdCBkcml2ZU1hdGNoID0gdGV4dC5tYXRjaCgvaHR0cHM/OlxcL1xcL2RyaXZlXFwuKD86Z29vZ2xlXFwuKT91c2VyY29udGVudFxcLmdvb2dsZVxcLmNvbVxcL1xcUys/KD89W1xcc1wiJ118JCkvaSk7XG4gIGlmIChkcml2ZU1hdGNoKSByZXR1cm4gZHJpdmVNYXRjaFswXTtcbiAgXG4gIHJldHVybiBudWxsO1xufTtcbiJdLCJuYW1lcyI6WyJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZURhdGEiLCJ1bmRlZmluZWQiLCJ0ZXh0IiwiY29udGVudCIsIm1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwiU3RyaW5nIiwicGFyc2VPcHRpb25zIiwibWVzc2FnZVRleHQiLCJmb3JtYXR0ZWRUZXh0Iiwib3B0aW9ucyIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwibWF0Y2giLCJwdXNoIiwidHJpbSIsImhhc1ZhbGlkTWVzc2FnZSIsInJlc3BvbnNlIiwiY29tcGV0ZW5jeV9zdGF0dXMiLCJleHRyYWN0TWVzc2FnZUZyb21SZXNwb25zZSIsImNvbnRhaW5zSW1hZ2VVcmwiLCJpbWFnZUV4dGVuc2lvblJlZ2V4IiwiZHJpdmVJbWFnZVJlZ2V4IiwiZHJpdmVDb250ZW50UmVnZXgiLCJ0ZXN0IiwiZXh0cmFjdEltYWdlVXJsIiwiaW1hZ2VNYXRjaCIsImRyaXZlTWF0Y2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./utils/messageUtils.js\n"));

/***/ })

});